# 2장. C++ 기초

## 2.1 들어가기

2장에서는 C++ 기본 기능에 대해 살펴봅니다.
책 전반에 걸쳐 최대한 많은 기능을 살펴보겠지만 모든 세부 사항을 설명하려면 삼국지 전권과 맞먹는 분량이 필요합니다.
그렇다고 모든 내용을 넣는다면 장식용 책이 되고 말 것입니다.
따라서 특정 기능에 대해 자세한 내용을 보고 싶다면 참조 사이트([CPlusPlus](http://www.cplusplus.com) 또는 [C++ reference](http://en.cppreference.com))를 참고하시기 바랍니다.
또한 한정된 지면 때문에 설명하지 못한 세부 사항은 부록에서 다루겠습니다.

## 2.2 함수

여러분, 초등학교나 중학교 수학 시간에 함수를 배운 적이 있나요? 그렇다면 함수란 무엇일까요? 배운지 너무 오래되어서 기억이 잘 안난다구요?
괜찮습니다. 모르더라도 이해하는데 큰 지장이 없으니까요! 우선 위키백과에서 함수의 정의가 무엇인지 찾아봅시다.

> 수학에서 함수(函數, 영어: function) 또는 사상(寫像, 영어: map)은 첫 번째 집합의 임의의 한 원소를 두 번째 집합의 오직 한 원소에 대응시키는 대응 관계이다.

무슨 말인지 이해하셨나요? 저는 이해하기 너무 어려워서 '까만 건 글씨요, 흰 건 종이로다...'라고 느꼈답니다. 보다 쉽게 이해할 수 있도록 그림 한 장을 보겠습니다.

<img src="https://github.com/utilForever/ModernCppCookbook/blob/master/Resources/2-1.png">

수학에서 함수란 입력으로 어떤 값을 넣으면 내부적으로 어떤 처리를 수행하고 최종 결괏값을 출력하는 것을 말합니다.
여기서 중요한 점은 함수 내부가 어떻게 구현돼 있는지 몰라도 입력을 넣으면 뭔가 출력이 나온다는 점입니다. 그래서 보통 함수 내부는 블랙박스로 생각하고 단순히 입력값과 출력값의 관계만을 생각합니다.

그렇다면 프로그래밍에서 함수란 무엇일까요? 결론부터 말씀드리면 프로그래밍에서의 함수도 수학에서의 함수와 같습니다.
단지 프로그래머들은 입력값을 넣었을 때 원하는 출력값을 만들어주는 함수를 C++로 구현할 뿐입니다.
프로그래밍에서도 함수 내부 구현은 블랙박스와 같아서 함수를 사용하는 입장에서는 이를 알 필요가 없습니다.
단순히 함수에 입력값을 넣으면 우리가 원하는 출력값을 얻을 수 있다는 점을 아는 것이 중요합니다.

C++ 함수의 일반적인 형태는 다음과 같습니다.

```C++
[inline] 리턴 타입 함수 이름 (인수 목록)
{
	함수의 본문
}
```

예를 들어, ```f(x) = 3x + 4```를 C++ 함수로 나타내 봅시다.

```C++
int f(int x)
{
	return 3 * x + 4;
}
```

이제부터 C++ 함수의 구성 요소를 하나씩 살펴보도록 하겠습니다.

### 2.2.1 인수

### 2.2.2 리턴 타입

### 2.2.3 인라인

### 2.2.4 오버로딩

### 2.2.5 main 함수

우리는 1.5절에서 Hello, World 프로그램을 통해 이미 함수를 접했습니다. 바로 ```main``` 함수입니다.

```C++
int main()
{
    std::cout << "Hello, World!" << std::endl;

    return 0;
}
```

```main``` 함수는 일반 함수와는 근본적으로 다른 함수입니다.
먼저, 모든 C++ 프로그램은 ```main``` 함수를 호출해 시작합니다.
따라서 ```main``` 함수를 정의하지 않으면 컴파일 오류가 발생합니다.

```
1>MSVCRT.lib(exe_main.obj) : error LNK2001: unresolved external symbol _main
1>C:\Users\utilForever\documents\visual studio 2017\Projects\Test\Release\Test.exe : fatal error LNK1120: 1 unresolved externals
```

또한 ```main``` 함수의 표준 시그니처는 2가지 뿐입니다. 이 시그니처는 C++ 표준으로 정해져 있습니다.

```C++
int main()
```

또는

```C++
int main(int argc, char* argv[])
```

후자는 ```int main(int argc, char** argv)```로 쓸 수도 있습니다.

두번째 시그니처를 좀 더 자세히 살펴보겠습니다. 두번째 시그니처는 매개 변수(```argc```, ```argv```)가 둘입니다. 매개 변수 ```argc```는 인수 개수, ```argv```는 인수 목록을 나타냅니다. 특히, ```argv```의 첫번째 인수(```argv[0]```, 배열에 대한 내용은 2.8.1절 참조)에는 실행한 파일 이름이 저장되어 있습니다. ```ArgcArgvTest```라는 프로그램을 통해 ```argc```와 ```argv```를 어떻게 사용하는지 알아봅시다.

```C++
#include <iostream>

int main(int argc, char* argv[])
{
	for (int i = 0; i < argc; ++i)
	{
		std::cout << argv[i] << '\n';
	}
		
	return 0;
}
```

위 프로그램을 컴파일 한 뒤, 명령창에서 이렇게 실행해 보세요.

```
ArgcArgvTest Warrior Archer Mage
```

실행 결과는 다음과 같습니다.

```
C:\Users\utilForever\Documents\GitHub\ModernCppCookbook\Debug\Examples.exe
Warrior
Archer
Mage
```

보다시피, 공백을 기준으로 각 인수를 분리합니다.
따라서 ```argc```의 값은 인수 개수인 4가 됩니다.
또한 ```argv```에는 분리한 각 인수를 저장합니다.
앞에서 이야기했듯이 ```argv```의 첫번째 인수에는 실행한 파일 이름을 저장하고, 두번째 인수부터는 입력한 각 문자열을 차례로 저장합니다(두번째 인수에는 ```Warrior```, 세번째 인수에는 ```Archer```, 네번째 인수에는 ```Mage```를 저장합니다).

한편, ```main``` 함수 끝에는 ```return 0;```이라는 문장이 있습니다.
이 문장은 프로그램이 올바르게 끝났는지 여부를 반환하는 종료 코드입니다.
반환값이 0(또는 ```<cstdlib>```의 ```EXIT_SUCCESS``` 매크로)이라면 정상, 다른 모든 값은 비정상적으로 마쳤음을 나타냅니다.